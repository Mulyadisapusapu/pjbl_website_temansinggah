<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kalkulator Statistik</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 600px;
        margin: 40px auto;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 10px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      input[type="text"],
      button {
        width: 100%;
        padding: 10px;
        margin-bottom: 15px;
        border-radius: 5px;
        border: 1px solid #ccc;
        box-sizing: border-box;
      }

      button {
        background-color: #007bff;
        color: white;
        cursor: pointer;
        border: none;
      }

      button:hover {
        background-color: #0056b3;
      }

      #hasil-container {
        margin-top: 20px;
        padding: 15px;
        background-color: #f9f9f9;
        border: 1px solid #eee;
        border-radius: 5px;
      }

      .nilai {
        font-weight: normal;
        color: #28a745;
      }
    </style>
  </head>
  <body>
    <h1>Kalkulator Statistik</h1>
    <label for="inputAngka">Masukkan Angka (Pisahkan dengan Koma): </label>
    <input type="text" id="inputAngka" placeholder="Contoh: 7, 77, 777, 7777" />
    <button id="tombolHitung">Hitung Semua</button>

    <div id="hasil-container">
      Hasil Perhitungan:
      <span class="nilai">
        <br />Rata-rata (Mean): <br />Median: <br />Modus:
      </span>
    </div>

    <script>
      document
        .getElementById("tombolHitung")
        .addEventListener("click", function () {
          const stringInput = document.getElementById("inputAngka").value;
          const angkaValid = stringInput
            .split(",")
            .map((s) => s.trim())
            .filter(Boolean)
            .map(Number)
            .filter((n) => !isNaN(n));
          const containerHasil = document.getElementById("hasil-container");
          containerHasil.innerHTML = "";

          if (angkaValid.length > 0) {
            const jumlah = angkaValid.reduce(
              (total, angka) => total + angka,
              0
            );
            const rataRata = jumlah / angkaValid.length;

            const angkaUrut = [...angkaValid].sort((a, b) => a - b);
            const indeksTengah = Math.floor(angkaUrut.length / 2);

            let median;
            if (angkaUrut.length % 2 === 0) {
              median =
                (angkaUrut[indeksTengah - 1] + angkaUrut[indeksTengah]) / 2;
            } else {
              median = angkaUrut[indeksTengah];
            }

            const frekuensi = {};
            angkaValid.forEach((angka) => {
              frekuensi[angka] = (frekuensi[angka] || 0) + 1;
            });

            let frekuensiMaks = 0;
            for (const angka in frekuensi) {
              if (frekuensi[angka] > frekuensiMaks) {
                frekuensiMaks = frekuensi[angka];
              }
            }

            let modus = [];
            if (frekuensiMaks > 1) {
              for (const angka in frekuensi) {
                if (frekuensi[angka] === frekuensiMaks) {
                  modus.push(Number(angka));
                }
              }
            }

            containerHasil.innerHTML = `<p>Rata-rata (Mean): <span class="nilai">${rataRata.toFixed(
              2
            )}</span>
            <p>
              Median: <span class="nilai">${median}</span>
            </p>
            <p>
              Modus: <span class="nilai">
                ${modus.length > 0 ? modus.join(",") : "Tidak ada"}
              </span>
            </p>`;
          } else {
            containerHasil.innerHTML = `<p style="color:red;">Input tidak valid. Silakan masukkan angka.</p>`;
          }
        });
    </script>
  </body>
</html>
